{% extends "base.html" %}
{% load static %}
{% block name %}
<title>ToDo List - TaskMate</title>
{% endblock %}

{% block title %}
<div class="container">
  <h1 class="text-center">
    <span style="color: black;">Task</span><span style="color: purple;">Mate</span>
  </h1>
</div>
{% endblock %}

{% block content %}
<div style="text-align: center;">
  <strong>{{ variable_key }}</strong>
</div>
{% for message in messages %}
<div class="alert alert-info alert-dismissible fade show d-flex justify-content-between align-items-center" role="alert">
    <span>{{ message }}</span>
    <button type="button" class="btn-close ms-2" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
    <!-- Add Task Form -->
<form method="post" class="row justify-content-center align-items-center g-2" style="text-align:center;">
  {% csrf_token %}
  <!-- Label -->
  <div class="col-auto">
    <label for="taskInput" class="col-form-label fw-bold" style="font-size: 0.95rem;">Add New Task</label>
  </div>
  <!-- Input -->
  <div class="col-6">
    <input type="text" 
           id="taskInput"
           name="title" 
           class="form-control"
           style="min-width: 300px;"
           placeholder="Enter Task Name" 
           required>
  </div>
  <!-- Button -->
  <div class="col-auto">
    <button type="submit" class="btn btn-primary btn-sm">    Add </button>
  </div>
</form>
</br>
<!-- Task List -->
<table class="table table-striped text-center row">
  <thead>
    <tr class="row">
      <th class="col-lg-3">TaskName</th>
      <th class="col-lg-6">Status</th>
      <th class="col-lg-1">Edit</th>
      <th class="col-lg-2">Delete</th>
    </tr>
  </thead>
  <tbody>
  </br>
    {% for obj in all_tasks %}
      <tr class="row">
        {% if obj.completed %}
          <td class="col-lg-3"><del>{{ obj.title }}</del></td>
          <!-- Completed task button -->
          <td class="col-lg-6"><a href="{% url 'task_pending' obj.id %}"><button type="button" class="btn btn-success" style="width: 120px; min-width: 120px;">Completed</button></a></td>
        {% else %}
          <td class="col-lg-3">{{ obj.title }}</td>
          <!-- Not completed task button -->
          <td class="col-lg-6"><a href="{% url 'task_done' obj.id %}"><button type="button" class="btn btn-warning" style="width: 120px; min-width: 120px;">Pending</button></a></td>
        {% endif %}
        <!-- Edit and Delete buttons -->
        <td class="col-lg-1"> <a href="{% url 'edit_task' obj.id %}"><button type="button" class="btn btn-secondary" style="width: 120px; min-width: 120px;">Edit</button></a> </td>
        <td class="col-lg-2"> <a href="{% url 'delete_task' obj.id %}"><button type="button" class="btn btn-danger" style="width: 120px; min-width: 120px;">Delete</button></a> </td>
      </tr>
    {% endfor %}
  </br>
  </tbody>
</table>
<!-- Pagination controls -->
<nav aria-label="...">
  <ul class="pagination justify-content-center">
    <li class="page-item"><a href="?page=1" class="page-link"><<</a></li>
    {% if all_tasks.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ all_tasks.previous_page_number }}">{{ all_tasks.previous_page_number }}</a></li>
    {% endif %}

    <li class="page-item"><a class="page-link" href="#" aria-current="page">{{ all_tasks.number }}</a></li>

    {% if all_tasks.has_next %}
     <li class="page-item"><a class="page-link" href="?page={{ all_tasks.next_page_number }}">{{ all_tasks.next_page_number }}</a></li>
    {% endif %}
    <li class="page-item"><a class="page-link" href="?page={{ all_tasks.paginator.num_pages }}">>></a></li>
  </ul>
</nav>
{% endblock %}

{% block staticimage %}
</br>
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-12 d-flex justify-content-center align-items-center">
                <!-- Unsplash sample image -->
                <img src="{% static 'images/workshop-2Kqhw3qST0o-unsplash.jpg' %}" alt="Sample Unsplash Image" class="img-fluid" style="max-width: 100%; height: auto;">
            </div>
        </div>
    </div>
{% endblock %}
